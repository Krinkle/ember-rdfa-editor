/* ==================================
   #SAY ANNOTATIONS HOVER
   ================================== */

.rdfa-annotations-hover:not(.show-rdfa-blocks) {
  overflow: hidden;

  // Make block elements relative
  div,
  h1,
  .h1,
  h2,
  .h2,
  h3,
  .h3,
  h4,
  .h4,
  h5,
  .h5,
  h6,
  .h6,
  ul,
  ol,
  [property="dc:title"],
  [property="dc:title foaf:name"],
  [typeof~="besluit:Besluit"],
  [property="ext:stemmingTable"],
  [property="ext:insertStemmingText"],
  [property="ext:aanwezigenTable"],
  [property="ext:insertAanwezigenText"],
  [property="prov:generated"] > [property="besluit:motivering"],
  [property="prov:generated"] > [property="prov:value"],
  [typeof="besluit:Zitting"],
  [property="eli:cites"],
  [property="openbaar"],
  [property^="ext"]:not([property="ext:heeftAfwezigeBijAgendapunt"]):not(span),
  [data-editor-highlight="true"]:not(li):not(span),
  [typeof="http://data.vlaanderen.be/ns/besluit#Besluit http://data.vlaanderen.be/ns/besluit#AanvullendReglement"],
  [typeof="besluit:Artikel"],
  [typeof="mobiliteit:Opstelling"] {
    position: relative;

    &:after {
      height: calc(100% - #{$say-unit});
      top: $say-unit;
    }
  }

  // Style before and after elements
  .mark-highlight-manual,
  [typeof]:not([typeof="foaf:Document"]),
  [property],
  [data-type],
  [data-editor-highlight="true"] {
    &:hover {
      border-bottom-color: tint($say-neutral,20);
    }

    &:before,
    &:after {
      position: absolute;
      transition: opacity $say-easing .5s, left $say-easing .2s;
      right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter});
      opacity: 0;
    }

    &:before {
      @include say-font-size($say-tiny,1.2);
      content:  attr(property) " " attr(typeof) " " attr(data-type);
      display: block;
      margin-top: .2rem;
      padding-right: $say-unit-tiny;
      width: $say-annotation-width-content;
      font-family: $say-font;
      font-weight: $say-regular;
      letter-spacing: .01rem;
      text-transform: uppercase;
      text-align: right;
      text-overflow: ellipsis;
      white-space: nowrap;
      color: $say-neutral;
      background-color: $say-neutral-lightest;
      pointer-events: none;
      overflow: hidden;
      opacity: 0;
    }

    &[data-editor-position-level]:before,
    &:hover:before {
      right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter});
      opacity: 1;
    }

    // Bring highlighted annotation to the front
    &[data-editor-position-level]:before {
      z-index: $say-z-index-alpha;
    }

    // Show lines on hover and selection
    &[data-editor-position-level]:after,
    &:hover:after {
      position: absolute;
      content: "";
      display: block;
      right: calc(100% + #{$say-annotation-gutter});
      width: $say-annotation-offset*2;
      border-right: 1px dashed $say-neutral-light;
      border-top: 1px dashed $say-neutral-light;
      margin-top: calc(-1.5rem + 1px);
      opacity: 1;
    }

    &[data-editor-position-level]:after {
      border-top-style: solid;
      border-right-style: solid;
    }

    // Hide right border when not selected
    &:not([data-editor-position-level]):hover:after,
    &:not([data-editor-position-level]):after {
      border-right: 0;
    }
  }

  // Making sure list items annotations look good too
  ul.bullet-list:not(.article-list),
  ol.numbered-list:not(.article-list) {
    // Level 1
    &.mark-highlight-manual,
    &[typeof],
    &[property],
    &[about],
    &[resource],
    &[data-type],
    &[data-editor-highlight="true"] {
      &:before {
        right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter} + #{$say-unit-small});
      }

      &:after {
        right: calc(100% + #{$say-annotation-gutter} + #{$say-unit-small});
      }
    }

    > li .mark-highlight-manual,
    > li [typeof],
    > li [property],
    > li [about],
    > li [resource],
    > li [data-type],
    > li [data-editor-highlight="true"] {
      &:before {
        right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter} + #{$say-unit-small});
      }

      &:after {
        right: calc(100% + #{$say-annotation-gutter} + #{$say-unit-small});
      }
    }

    // Level 2
    > li li .mark-highlight-manual,
    > li li [typeof],
    > li li [property],
    > li li [about],
    > li li [resource],
    > li li [data-type],
    > li li [data-editor-highlight="true"] {
      &:before {
        right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter} + #{$say-unit-small * 2});
      }

      &:after {
        right: calc(100% + #{$say-annotation-gutter} + #{$say-unit-small * 2});
      }
    }

    // Level 3
    > li li li > .mark-highlight-manual,
    > li li li > [typeof],
    > li li li > [property],
    > li li li > [about],
    > li li li > [resource],
    > li li li > [data-type],
    > li li li > [data-editor-highlight="true"] {
      &:before {
        right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter} + #{$say-unit-small * 4});
      }

      &:after {
        right: calc(100% + #{$say-annotation-gutter} + #{$say-unit-small * 4});
      }
    }

    // Level 4
    > li li li li > .mark-highlight-manual,
    > li li li li > [typeof],
    > li li li li > [property],
    > li li li li > [about],
    > li li li li > [resource],
    > li li li li > [data-type],
    > li li li li > [data-editor-highlight="true"] {
      &:before {
        right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter} + #{$say-unit-small * 7});
      }

      &:after {
        right: calc(100% + #{$say-annotation-gutter} + #{$say-unit-small * 7});
      }
    }

    // Level 5
    > li li li li li > .mark-highlight-manual,
    > li li li li li > [typeof],
    > li li li li li > [property],
    > li li li li li > [about],
    > li li li li li > [resource],
    > li li li li li > [data-type],
    > li li li li li > [data-editor-highlight="true"] {
      &:before {
        right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter} + #{$say-unit-small * 11});
      }

      &:after {
        right: calc(100% + #{$say-annotation-gutter} + #{$say-unit-small * 11});
      }
    }

    // Level 6
    > li li li li li li > .mark-highlight-manual,
    > li li li li li li > [typeof],
    > li li li li li li > [property],
    > li li li li li li > [about],
    > li li li li li li > [resource],
    > li li li li li li > [data-type],
    > li li li li li li > [data-editor-highlight="true"] {
      &:before {
        right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter} + #{$say-unit-small * 16});
      }

      &:after {
        right: calc(100% + #{$say-annotation-gutter} + #{$say-unit-small * 16});
      }
    }

    // Level 7
    > li li li li li li li > .mark-highlight-manual,
    > li li li li li li li > [typeof],
    > li li li li li li li > [property],
    > li li li li li li li > [about],
    > li li li li li li li > [resource],
    > li li li li li li li > [data-type],
    > li li li li li li li > [data-editor-highlight="true"] {
      &:before {
        right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter} + #{$say-unit-small * 22});
      }

      &:after {
        right: calc(100% + #{$say-annotation-gutter} + #{$say-unit-small * 22});
      }
    }

    // Level 8
    > li li li li li li li li > .mark-highlight-manual,
    > li li li li li li li li > [typeof],
    > li li li li li li li li > [property],
    > li li li li li li li li > [about],
    > li li li li li li li li > [resource],
    > li li li li li li li li > [data-type],
    > li li li li li li li li > [data-editor-highlight="true"] {
      &:before {
        right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter} + #{$say-unit-small * 29});
      }

      &:after {
        right: calc(100% + #{$say-annotation-gutter} + #{$say-unit-small * 29});
      }
    }

    // Level 9
    > li li li li li li li li li > .mark-highlight-manual,
    > li li li li li li li li li > [typeof],
    > li li li li li li li li li > [property],
    > li li li li li li li li li > [about],
    > li li li li li li li li li > [resource],
    > li li li li li li li li li > [data-type],
    > li li li li li li li li li > [data-editor-highlight="true"] {
      &:before {
        right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter} + #{$say-unit-small * 37});
      }

      &:after {
        right: calc(100% + #{$say-annotation-gutter} + #{$say-unit-small * 37});
      }
    }

    // Level 10
    > li li li li li li li li li li > .mark-highlight-manual,
    > li li li li li li li li li li > [typeof],
    > li li li li li li li li li li > [property],
    > li li li li li li li li li li > [about],
    > li li li li li li li li li li > [resource],
    > li li li li li li li li li li > [data-type],
    > li li li li li li li li li li > [data-editor-highlight="true"] {
      &:before {
        right: calc(100% + #{$say-annotation-offset*2} + #{$say-annotation-gutter} + #{$say-unit-small * 45});
      }

      &:after {
        right: calc(100% + #{$say-annotation-gutter} + #{$say-unit-small * 45});
      }
    }
  }

  // Hide empty properties or flagged as noHighlight
  [property=""],
  [typeof=""],
  [property="http://mu.semte.ch/vocabularies/ext/noHighlight"],
  [property="http://mu.semte.ch/vocabularies/ext/noHighlight"] {
    border-bottom: 0 !important;

    &:after,
    &:before,
    &[data-editor-position-level]:after,
    &[data-editor-position-level]:before,
    &[data-editor-position-level]:hover:after,
    &[data-editor-position-level]:hover:before,
    &:hover:after,
    &:hover:before {
      display: none !important;
      content: '' !important;
      display: none !important;
      opacity: 0 !important;
    }
  }

  @include mq($until: large) {
    // Hide all hover annotations on small screens
    .mark-highlight-manual,
    [typeof]:not([typeof="foaf:Document"]),
    [property],
    [data-type],
    [data-editor-highlight="true"] {
      &:before,
      &:after {
        display: none !important;
      }
    }

  }
}
